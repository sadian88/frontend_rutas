<div *ngIf="usuario() as current" class="min-h-screen bg-slate-100 lg:flex">
  <aside class="hidden lg:flex lg:min-h-screen lg:w-72 flex-col justify-between bg-slate-950 text-slate-200 p-6 shadow-xl">
    <div>
      <div class="flex items-center gap-3">
        <div class="flex h-12 w-12 items-center justify-center rounded-2xl bg-primary-600 text-lg font-semibold text-white shadow-lg">
          GG
        </div>
        <div>
          <p class="text-lg font-semibold">Gestión de grúas</p>
          <p class="text-sm text-slate-400">Panel principal</p>
        </div>
      </div>

      <nav class="mt-8 space-y-2">
        <a
          *ngFor="let link of links()"
          [routerLink]="link.path"
          routerLinkActive="bg-slate-800 text-white"
          [routerLinkActiveOptions]="{ exact: link.path === '' }"
          class="group flex items-center gap-3 rounded-xl px-3 py-2 text-sm font-medium text-slate-300 transition hover:bg-slate-800 hover:text-white"
        >
          <ng-container [ngSwitch]="link.label">
            <svg *ngSwitchCase="'Resumen'" class="h-5 w-5 text-primary-400" fill="none" stroke="currentColor" stroke-width="1.6" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3 3h8v8H3V3zm10 0h8v8h-8V3zm0 10h8v8h-8v-8zM3 13h8v8H3v-8z" />
            </svg>
            <svg *ngSwitchCase="'Sedes'" class="h-5 w-5 text-primary-400" fill="none" stroke="currentColor" stroke-width="1.6" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="m3 10 9-6 9 6v9a1 1 0 0 1-1 1h-5v-6h-6v6H4a1 1 0 0 1-1-1v-9z" />
            </svg>
            <svg *ngSwitchCase="'Gruas'" class="h-5 w-5 text-primary-400" fill="none" stroke="currentColor" stroke-width="1.6" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3 17h3l5-12h5l5 12h-3M5 21h2M17 21h2M9 13h6" />
            </svg>
            <svg *ngSwitchCase="'Rutas'" class="h-5 w-5 text-primary-400" fill="none" stroke="currentColor" stroke-width="1.6" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4 4h5l2 5-2 5H4l5 6h7l4-6h-5l-2-5 2-5h5l-4-6H9L4 4z" />
            </svg>
            <svg *ngSwitchCase="'Reportes'" class="h-5 w-5 text-primary-400" fill="none" stroke="currentColor" stroke-width="1.6" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4 4h6v6H4V4zm0 10h6v6H4v-6zm10-10h6v9h-6V4zm0 13h6v3h-6v-3z" />
            </svg>
            <svg *ngSwitchCase="'Mis gastos'" class="h-5 w-5 text-primary-400" fill="none" stroke="currentColor" stroke-width="1.6" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 8c-3.314 0-6 1.79-6 4s2.686 4 6 4 6-1.79 6-4-2.686-4-6-4zm0-6v4m0 12v4m-7-4 1.5 2M5 6l1.5-2m11 14-1.5 2M19 6l-1.5-2" />
            </svg>
            <svg *ngSwitchDefault class="h-5 w-5 text-primary-400" fill="none" stroke="currentColor" stroke-width="1.6" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6l4 2" />
              <circle cx="12" cy="12" r="9" />
            </svg>
          </ng-container>
          <span>{{ link.label }}</span>
        </a>
      </nav>
    </div>
    <div class="mt-10 rounded-2xl bg-slate-900/40 p-4">
      <p class="text-sm text-slate-400">Sesión activa</p>
      <p class="text-lg font-semibold text-white">{{ current.nombre }}</p>
      <p class="text-sm text-slate-500">{{ current.rol }}</p>
    </div>
  </aside>

  <div class="lg:hidden bg-slate-950 px-5 py-4 text-white">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-lg font-semibold">Gestión de grúas</p>
        <p class="text-xs text-slate-400 uppercase tracking-widest">Panel</p>
      </div>
      <button
        type="button"
        (click)="cerrarSesion()"
        class="rounded-lg border border-white/20 px-3 py-1.5 text-sm font-medium text-white hover:bg-white/10"
      >
        Cerrar sesión
      </button>
    </div>
    <nav class="scroll-h mt-4">
      <a
        *ngFor="let link of links()"
        [routerLink]="link.path"
        routerLinkActive="bg-primary-600 text-white"
        [routerLinkActiveOptions]="{ exact: link.path === '' }"
        class="whitespace-nowrap rounded-xl border border-white/10 px-4 py-2 text-sm font-medium text-white/80 transition hover:bg-white/10 hover:text-white"
      >
        {{ link.label }}
      </a>
    </nav>
  </div>

  <main class="flex-1">
    <header class="sticky top-0 z-20 bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/60">
      <div class="flex items-center justify-between px-5 py-4">
        <div>
          <p class="text-lg font-semibold text-slate-900">Hola, {{ current.nombre }}</p>
          <p class="text-sm text-slate-500">Rol: {{ current.rol }}</p>
        </div>
        <button
          type="button"
          (click)="cerrarSesion()"
          class="hidden lg:inline-flex items-center rounded-xl bg-primary-600 px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-primary-600/20 transition hover:bg-primary-700"
        >
          Cerrar sesión
        </button>
      </div>
    </header>

    <section class="px-4 py-6 sm:px-6 lg:px-8">
      <router-outlet />
    </section>
  </main>
</div>
